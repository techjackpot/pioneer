(function(e){var f="You have unsaved changes on this page!";var c=0;e(document).ready(function(){if(e("#event_input_link").val()!=""){e("#event_control_link .input-prepend").append("&nbsp;&nbsp;<a href='"+e("#event_control_link .add-on").html()+e("#event_input_link").val()+"' class='btn btn-small' target='_blank'>Preview</a>")}e('input:not(:button,:submit,[name = "search"]),textarea,select').change(function(){c=1;window.onbeforeunload=function(){if(f!=null){return f}}});e('input:button,submit,[name = "save"],[name = "view"],[name = "export"],[name = "search"]').click(function(g){f=null});e("#people_input_username").focus(function(){if(e("#people_input_username").val().trim()==""){e("#people_input_username").val(e("#people_input_first_name").val().trim().toLowerCase().replace(/[^a-z\s]/gi,"").substr(0,1)+e("#people_input_last_name").val().trim().toLowerCase().replace(/[^a-z\s]/gi,""))}});e("#event_input_title").focus(function(){if(e("#event_input_title").val().trim()==""){e("#event_input_title").val(e("#event_input_short_title_ids").val().trim())}});e("#event_input_calendar_title").focus(function(){if(e("#event_input_calendar_title").val().trim()==""){e("#event_input_calendar_title").val(e("#event_input_title").val().trim())}});e("#program_input_title").focus(function(){if(e("#program_input_title").val().trim()==""){e("#program_input_title").val(e("#program_input_short_title_ids").val().trim())}});e("program_input_calendar_title").focus(function(){if(e("#program_input_calendar_title").val().trim()==""){e("#program_input_calendar_title").val(e("#program_input_title").val().trim())}})});e(function(){e("input.datepicker").datepicker()});e(function(){e("input.timepicker").timepicker({timeFormat:"h:mmp"})});function a(j){e("#"+j+" input.phonepicker").intlTelInput({utilsScript:"/js/phoneutils.js"});var h=e.fn.intlTelInput.getCountryData(),g=e("#"+j+" input.phonepicker"),i=e("#"+j+" #address-country");curvalue=e("#"+j+" input.country_code").val();g.change(function(){e("#"+j+" .cntcode").html("+"+e("#"+j+" .country-list .active").attr("data-dial-code"));e("#"+j+" input.country_code").val(e("#"+j+" .country-list .active").attr("data-country-code"))})}function d(g){curvalue=e("#"+g+" input.country_code").val();telInput=e("#"+g+" input.phonepicker");if(curvalue!=""){telInput.intlTelInput("selectCountry",curvalue);e("#"+g+" .cntcode").html("+"+e("#"+g+" .country-list .active").attr("data-dial-code"))}else{telInput.intlTelInput("selectCountry","us");e("#"+g+" .cntcode").html("+1")}}e(document).ready(function(){if(e("#phoneone").length!=0){a("phoneone");d("phoneone")}if(e("#phonetwo").length!=0){a("phonetwo");d("phonetwo")}if(e("#phonethree").length!=0){a("phonethree");d("phonethree")}if(e("#phonefour").length!=0){a("phonefour");d("phonefour")}if(e("#phonefive").length!=0){a("phonefive");d("phonefive")}});function b(g){return"/admin/search/batch/"+e(this).parents(".chosen-container").siblings(".js-batch-condition").val()}e.fn.batch_add=function(){this.each(function(){var g=e(this);g.on("change",".js-batch-condition",function(){e(this).siblings(".js-batch-value").val("").trigger("chosen:updated")});g.on("click",".js-batch-remove",function(){e(this).parent().remove();g.find(".js-batch-table").trigger("batch:update")});g.find(".js-batch-add-filter").data("batch_count",0).click(function(){var h=e(this).data("batch_count")+1;e(this).data("batch_count",h);var k=e(this).parent().parent().children(".js-batch-filter");var l=k.children(".js-batch-condition").clone().prop("disabled",false);l.attr("id",l.attr("id").replace("_0_","_"+h+"_")).attr("name",l.attr("name").replace("[0]","["+h+"]"));var j=k.children(".js-batch-value").clone().prop("disabled",false);j.attr("id",j.attr("id").replace("_0_","_"+h+"_")).attr("name",j.attr("name").replace("[0]","["+h+"]"));var i=e("<div/>").append(l).append(" ").append(j).append(' <i class="icon-remove js-batch-remove"></i>');k.before(i);j.ajaxChosen({headers:{"DZ-Output":"json"},type:"POST"},{generateUrl:b},{allow_single_deselect:true});g.find(".js-batch-table").trigger("batch:update");return false});g.find(".js-batch-table").on("batch:update",function(){var i=e(this);var h=e(this).parents("form");e.ajax({url:document.location.pathname+"_ajax",type:"POST",data:h.serialize(),success:function(j){i.find("tbody").html(j)}})});if(g.find(".js-batch-table").length){g.on("change","select",function(){g.find(".js-batch-table").trigger("batch:update")})}})}})(jQuery);(function(b){function a(){b(this).parent().trigger("paginator:load");return false}function c(){var f=b(this);if(f.data("paginator_loading")){return}f.data("paginator_loading",true);var e=f.data("page")+1;f.data("page",e);f.parents("#main").data("pages",e);f.children("a").text("Loading...");var d=document.location.search;if(d===""){d="?page="+e}else{if(d.match(/(\?|&)page=(.*?)(&|$)/)){d=d.replace(/(\?|&)page=(.*?)(&|$)/,"$1page="+e+"$3")}else{d=d+"&page="+e}}b.ajax({url:document.location.pathname+d,headers:{"DZ-Output":"paginator"},success:function(h){if(h===""){f.hide()}else{var g=f.siblings(".data-table");g.find("tbody > .spacer").before(h);g.find(".activity-wall").prop("rowspan",g.find("tbody > tr").length);f.data("paginator_loading",false);f.children("a").text("Scroll to load more")}}})}b.fn.paginator=function(d){if(typeof(d)==="string"){if(d==="destroy"){}else{window.console.log("Unknown action passed to paginator()")}return}var e=(d&&typeof d==="object")?d:{};this.on("paginator:load",c);this.children("a").on("click",a);if(!this.data("page")){this.data("page",1)}this.each(function(){var f=b(this);var g=e.scrollParent||window;b(g).on("scroll.paginator",function(i){var h=f.data("paginator_loading");if(!h&&f.position().top+f.height()<=b(this).scrollTop()+b(this).height()+100&&f.is(":visible")){f.trigger("paginator:load")}}).trigger("scroll.paginator")})}})(jQuery);(function(c){c.fn.message=function(h,g,e){var i=c(this),d;if(e===undefined){e=15000}if(g){d="alert-"+g}else{d="alert-info"}var f=c("<div/>").addClass("alert").addClass(d).html(h).append('<a class="close" data-dismiss="alert">Ã—</a>').prependTo(i);f.hide().slideDown();if(e){f.delay(e).slideUp(function(){c(this).remove()})}return this};c.message=function(f,e,d){c("#content > .container-fluid").message(f,e,d)};c.process_json_response=function(d,e){if(!e||!e.length){e=c("#content > .container-fluid")}if(d.msgs&&d.msgs.error){c.each(d.msgs.error,function(f,g){e.message(g,"error")})}if(d.msgs&&d.msgs.success){c.each(d.msgs.success,function(f,g){e.message(g,"success")})}if(d.msgs&&d.msgs.info){c.each(d.msgs.info,function(f,g){e.message(g,"info")})}};function b(f,g){var e=f.data("prefix")||"";var d=new RegExp("^"+e+"control_(.*)$");f.find(".control-group.error").each(function(){var h=c(this).prop("id").replace(d,"$1");if(!g[h]){c(this).removeClass("error").find(".controls > .help-error").slideUp(function(){c(this).remove()})}});c.each(g,function(h,i){var j=f.find("#"+e+"control_"+h);j.addClass("error");if(!j.find(".controls > .help-error").length){c("<div/>").addClass("help-block").addClass("help-error").text(i.join(", ")).appendTo(j.find(".controls")).hide().slideDown()}else{j.find(".controls > .help-error").text(i.join(", "))}})}function a(f){var d=c(this);f.preventDefault();var g=d.find("input[type=submit], button[type=submit]");g.prop("disabled",true);c.ajax({url:d.prop("action"),data:d.serialize(),type:"POST",headers:{"DZ-Output":"json"},success:function(e){if(e.success){c.process_json_response(e);d.parents(".modal").modal("hide");c("#main").trigger("reload")}else{c.process_json_response(e,d.find(".modal-body"));b(d,e.errors||{})}g.prop("disabled",false)},error:function(){d.find(".modal-body").message("Sorry, but we experienced an error while trying to process this form.","error");g.prop("disabled",false)}})}c.fn.form=function(){this.on("submit",a);return this};c.fn.validate=function(){var d=true;c(this).find("[data-validate]").each(function(){var g=c(this);var h=true;var f=null;var e=g.data("validate")||"";g.find("input[type=text], input[type=password], textarea, select").each(function(){if(c(this).parents(".chosen-container").length){return}e.split(",").forEach(function(i){if(i==="required"){if(c(this).val()===""){h=false;f="is required"}}if(c(this).val()!==""&&i==="email"){if(!(/[^@]+@[^@]+\.[^@]+/.test(c(this).val()))){h=false;f="is an invalid email"}}},this)});if(h){g.removeClass("error");g.find(".help-error").remove()}else{g.addClass("error");g.find(".help-error").remove();g.find(".controls").append(c("<span>").addClass("help-block").addClass("help-error").text(f))}d=d&&h});return d}})(jQuery);(function(b){function c(f){var d=b(this).parent().find(".js-activity-comment");f.preventDefault();if(d.val()===""){return}d.prop("disabled",true);b.ajax({url:"/admin/changelog/comment",headers:{"DZ-Output":"json"},type:"POST",data:{message:d.val(),name:d.data("model-name"),id:d.data("model-id")},dataType:"json",success:function(e){d.prop("disabled",false).val("");d.parent().after(b(e.contents))},error:function(){d.prop("disabled",false);window.alert("Sorry, we couldn't submit your comment at this time")}})}function a(){}b.fn.activity_wall=function(){this.on("activity_wall:update",a);this.find("#js-activity-comment-button").on("click",c);return this}})(jQuery);(function(d){function a(){var f=d(this).parents(".js-price-tiers").find(".js-price-tier-template").clone().removeClass("js-price-tier-template").show();var e=d(this).parents(".js-price-tiers").data("tier_count")-1;d(this).parents(".js-price-tiers").data("tier_count",e);f.find("input").each(function(){d(this).prop("disabled",false);d(this).prop("id",d(this).prop("id").replace("_0_","_"+e+"_"));d(this).prop("name",d(this).prop("name").replace("[0]","["+e+"]"))});f.append(" ").append(' <i class="icon-remove js-price-tier-remove"></i>');d(this).parent().before(f);return false}function c(){d(this).parent().remove();return false}function b(){var e=d(this).parent().find("input").first().prop("name").replace(/\[\w+\]$/,"[_delete]");d(this).parents(".js-price-tiers").append('<input type="hidden" name="'+e+'" value="1">');d(this).parent().remove();return false}d.fn.price_tiers=function(){this.data("tier_count",0);this.find(".js-add-price-tier").on("click",a);this.on("click",".js-price-tier-remove",c);this.on("click",".js-price-tier-delete",b);return this}})(jQuery);jQuery(function(j){function k(){j(this).remove()}function c(G){var F=j(j.parseHTML(G));j('<div class="modal fade" />').append(F).appendTo("body").initialize().on("hidden.bs.modal",k).modal("show",this);return F}function d(H){var F=j(this).prop("href").split("#");var G=this;j.ajax({url:F[0],headers:{"DZ-Output":"modal"},success:function(J){var I=c.call(G,J);if(F[1]){I.find('.nav-tabs a[href="#'+F[1]+'"]').tab("show")}},error:function(I,K,J){if(I.responseText&&I.responseText.length>0){c.call(G,I.responseText)}}});H.preventDefault()}function D(G){var H=j(this);var F=H.data("confirm")===true?"Are you sure you want to delete this item?":j(this).data("confirm");if(H.data("remote")){if(!H.data("confirm")||window.confirm(F)){j.ajax({url:H.prop("href"),headers:{"DZ-Output":"json"},success:function(I){j.process_json_response(I,H.parents(".modal-body"))}})}return false}else{if(H.data("confirm")){return window.confirm(F)}}}function u(){j(this).parents("thead").siblings("tbody").find("input[type=checkbox]").prop("checked",j(this).prop("checked"))}function B(){j(this).siblings("#organization_addresses_"+j(this).val()).show().siblings(".organization_addresses").hide()}function h(){j(this).siblings("#organization_addresses_"+j(this).val()).show().siblings(".organization_addresses").hide()}function E(){j(this).parents(".control-group").find(".js-program-official-salutation, .js-program-official-organization, .js-program-official-title").hide()}function g(){if(j(this).val()==="3"){j(this).parents(".control-group").first().siblings("#people_control_group_id").show().find("select").prop("disabled",false)}else{j(this).parents(".control-group").first().siblings("#people_control_group_id").hide().find("select").prop("disabled",true)}}function z(){j(this).parents("form").find("#event_input_start_time, #event_input_end_time, #program_input_start_time, #program_input_end_time").prop("disabled",j(this).prop("checked"))}function p(){var F=j(this).data("url")+"&"+j(this).parents(".modal-content").first().find("input").serialize();window.location=F;return false}function A(){var F=j(j.parseHTML('<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">Ã—</button> <h4 class="modal-title">Export Table</h4> </div> <div class="modal-body"> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> <button type="button" class="btn btn-primary pull-left">Export</button> </div> </div> </div>'));j.each(j(this).data("fields"),function(G,H){F.find(".modal-body").append(j("<label>").addClass("checkbox").text(" "+H[1]).prepend(j("<input>").attr("type","checkbox").val(1).attr("name","field["+H[0]+"]").prop("checked",H[2])))});F.find(".btn-primary").data("url",j(this).prop("href")).click(p);j('<div class="modal fade" />').append(F).appendTo("body").initialize().on("hidden.bs.modal",k).modal("show",this);return false}function l(){var F=j(this).find(":selected");j("<tr>").append(j("<td>").text(F.text()).append(j("<input>").attr("type","hidden").attr("name","individual_ids[]").val(F.prop("value"))),j("<td>").text(F.data("title")),j("<td>").text(F.data("organization")),j("<td>").text(F.data("city")),j("<td>").addClass("span2 text-right").html('<a class="btn btn-mini btn-danger js-invite-remove"><i class="icon-white icon-remove"></i> Remove</a>')).appendTo(j(this).parents(".control-group").siblings("table").children("tbody"));F.prop("selected",false);j(this).trigger("chosen:updated")}function y(){var F=j(this);if(F.data("id")){j("<input>").attr("type","hidden").attr("name","remove_ids[]").val(F.data("id")).appendTo(F.parents("form"))}F.parents("tr").first().remove();return false}function s(J){var I=j(this);var H=I.parents("#form-organization-people");J.preventDefault();var K=I.text();var G=I.data("target");I.parent().toggleClass("active");var F=j.makeArray(I.parents(".dropdown-menu").children(".active").map(function(){return j(this).children().text()}));I.parent().parent(".dropdown-menu").siblings(".dropdown-toggle").html('<i class="icon-filter"></i> Status: '+(F.length>0?F.join(", "):"All")+' <b class="caret"></b>');H.find("tbody tr").each(function(){if(F.length===0||j.inArray(j(this).find(G).text(),F)>=0){j(this).show().find("input").prop("disabled",false)}else{j(this).hide().find("input").prop("disabled",true)}})}function e(I){var H=j(this);var G=H.parents("#form-event-attendees");I.preventDefault();var J=j(this).text();var F=G.find('input[name="attendee_ids[]"]:not(:disabled):checked').parent().parent();j.ajax({url:j(this).prop("href"),type:"POST",data:G.find('input[name="attendee_ids[]"]').serialize(),success:function(){F.find(H.data("target")).text(J)}})}function x(J){var I=j(this);var H=I.parents("#form-event-attendees");J.preventDefault();var K=I.text();var G=I.data("target");I.parent().toggleClass("active");var F=j.makeArray(I.parents(".dropdown-menu").children(".active").map(function(){return j(this).children().text()}));I.parent().parent(".dropdown-menu").siblings(".dropdown-toggle").html('<i class="icon-filter"></i> Status: '+(F.length>0?F.join(", "):"All")+' <b class="caret"></b>');H.find("tbody tr").each(function(){if(F.length===0||j.inArray(j(this).find(G).text(),F)>=0){j(this).show().find("input").prop("disabled",false)}else{j(this).hide().find("input").prop("disabled",true)}})}function n(J){var I=j(this);var H=I.parents("#form-organization-payments");J.preventDefault();var K=I.text();var G=I.data("target");I.parent().toggleClass("active");var F=j.makeArray(I.parents(".dropdown-menu").children(".active").map(function(){return j(this).children().text()}));I.parent().parent(".dropdown-menu").siblings(".dropdown-toggle").html('<i class="icon-filter"></i> Type: '+(F.length>0?F.join(", "):"All")+' <b class="caret"></b>');H.find("tbody tr").each(function(){if(F.length===0||j.inArray(j(this).find(G).text(),F)>=0){j(this).show().find("input").prop("disabled",false)}else{j(this).hide().find("input").prop("disabled",true)}})}function v(G){var F=j(this);G.preventDefault();if(window.confirm("Are you sure you want to send the confirmation email to this person?")){j.ajax({url:j(this).prop("href"),headers:{"DZ-Output":"json"},success:function(H){j.process_json_response(H);window.alert("Confirmation email sent successfully.")},error:function(H){j.process_json_response(H)}})}}function r(G){var F=j(this);G.preventDefault();j.ajax({url:j(this).prop("href"),headers:{"DZ-Output":"json"},success:function(H){j.process_json_response(H);window.alert("Attendee paid status updated.")},error:function(H){j.process_json_response(H)}})}function b(G){var F=j(this);G.preventDefault();j("#loading").show();j.ajax({url:j(this).prop("href"),headers:{"DZ-Output":"json"},success:function(H){j.process_json_response(H);window.alert("Attendee payment captured and confirmation email sent (if chosen).")},error:function(H){j.process_json_response(H)}});j("#loading").hide()}function i(){if(j(this).val()===""){j(this).parents(".control-group").siblings(":not(#invoice_process_control_auth_only, .form-actions)").show().find("input, select").prop("disabled",false)}else{j(this).parents(".control-group").siblings(":not(#invoice_process_control_auth_only, .form-actions)").hide().find("input, select").prop("disabled",true)}}function a(){var F=window.open(j(this).prop("href"),"print","status=1,width=850,height=1100");return false}function o(){var G,F;G=j(this).find(":selected").text();if(G===""){return}else{F=G.match(/ \$(\d+\.\d{2})$/)[1]}j(this).parents("form").find("#invoice_input_amount").val(F)}var C={source:function(H,I){var F=this.$element;var G=F.data("table");if(F.data("cache")){return F.data("cache")}else{j.getJSON("/admin/typeahead",{table:G},function(J){F.data("cache",J);return I(J)});return[]}},updater:function(G){var F=j(this.$element).val().split(",");F.pop();F.push(G);F.push("");j.each(F,function(H,I){F[H]=j.trim(I)});return F.join(", ")},matcher:function(H){var G=this.query.split(",");j.each(G,function(I,J){G[I]=j.trim(J)});var F=j.trim(G.pop());return j.inArray(H,G)<0&&H.toLowerCase().indexOf(F.toLowerCase())>=0}};var t={source:function(H,I){var F=this.$element;var G=F.data("table");if(F.data("cache")){return F.data("cache")}else{j.getJSON("/admin/typeahead",{table:G},function(J){F.data("cache",J);return I(J)});return[]}},updater:function(F){return F},matcher:function(H){var G=this.query.split(",");j.each(G,function(I,J){G[I]=j.trim(J)});var F=j.trim(G.pop());return j.inArray(H,G)<0&&H.toLowerCase().indexOf(F.toLowerCase())>=0}};function w(G){var F=j(this);G.preventDefault();if(window.confirm("Are you sure you want to remove this attendee?")){j.ajax({url:j(this).prop("href"),headers:{"DZ-Output":"json"},success:function(H){j.process_json_response(H);F.parents("tr").remove()},error:function(H){j.process_json_response(H)}})}}function f(G){var F=j(this).parents("form").first();F.find(".js-report-vars").remove();F.find(".form-actions button").prop("disabled",true);if(j(this).val()===""){F.find("hr").hide()}else{F.find("hr").show().after(j("<p>").text("Loading...").addClass("text-center muted js-report-vars"));j.ajax({url:document.location.href,data:{vars:j(this).val()},dataType:"json",success:function(H){j.process_json_response(H);var I=j("<div>").addClass("js-report-vars").html(H.form);F.find(".form-actions button").prop("disabled",false);F.find(".js-report-vars").remove();F.find("hr").show().after(I);F.find(".form-actions button[value=word]").prop("disabled",!H.word_export);F.find(".form-actions button[value=submit],.form-actions button[value=csv]").prop("disabled",!H.table);I.initialize()}})}}function q(F){if(!j(this).validate()){F.preventDefault()}}j.fn.initialize=function(){this.find("select.chosen").chosen({allow_single_deselect:true});this.find("select.chosen-ajax.chosen-users").ajaxChosen({headers:{"DZ-Output":"json"},type:"POST",url:"/admin/search/users"},{},{allow_single_deselect:true});this.find("select.chosen-ajax.chosen-userstitlecompany").ajaxChosen({headers:{"DZ-Output":"json"},type:"POST",url:"/admin/search/userstitlecompany"},{},{allow_single_deselect:true});this.find("select.chosen-ajax.chosen-activeuserstitlecompany").ajaxChosen({headers:{"DZ-Output":"json"},type:"POST",url:"/admin/search/activeuserstitlecompany"},{},{allow_single_deselect:true});this.find("select.chosen-ajax.chosen-paymasters").ajaxChosen({headers:{"DZ-Output":"json"},type:"POST",url:"/admin/search/users"},{},{allow_single_deselect:true});this.find("select.chosen-ajax.chosen-company").ajaxChosen({headers:{"DZ-Output":"json"},type:"POST",url:"/admin/search/company"},{},{allow_single_deselect:true});this.find("select.chosen-ajax.chosen-staff").ajaxChosen({headers:{"DZ-Output":"json"},type:"POST",url:"/admin/search/staff"},{},{allow_single_deselect:true});this.find("select.chosen-ajax.chosen-leader").ajaxChosen({headers:{"DZ-Output":"json"},type:"POST",url:"/admin/search/staff"},{},{allow_single_deselect:true});this.find("select.chosen-ajax.chosen-officer").ajaxChosen({headers:{"DZ-Output":"json"},type:"POST",url:"/admin/search/staff"},{},{allow_single_deselect:true});this.find("select.chosen-ajax.chosen-hosts").ajaxChosen({headers:{"DZ-Output":"json"},type:"POST",url:"/admin/search/users"},{},{allow_single_deselect:true});this.find(".js-batch").batch_add();this.find(".js-paginator").paginator();this.find(".js-price-tiers").price_tiers();this.find(".activity-wall").activity_wall();this.find(".js-form").form();this.find("#form-event-attendees").on("click",".js-attendee-update",e).on("click",".js-attendee-filter-status",x).on("click",".js-attendee-remove",w).on("click",".js-send-confirmation",v).on("click",".js-attendee-paid",r).on("click",".js-capture-payment",b);this.find("#form-organization-people").on("click",".js-org-user-filter-status",s);this.find("#form-organization-payments").on("click",".js-orgpayments-filter-type",n);this.find(".js-data-table-export").click(A);this.find(".js-print-dialog").click(a);this.find(".js-invite-add-user").change(l);this.find(".js-report-select").on("change",f);this.find(".js-validate").on("submit",q);this.find("#invite_table_users").on("click",".js-invite-remove",y);this.find("textarea.ckeditor").ckeditor();this.find("abbr[title]").tooltip();this.find(".calendar .item").popover({trigger:"hover",placement:"top",html:true});this.find(".js-type-memorize").typeahead(C).attr("autocomplete","off");this.find(".js-type-memorize-single").typeahead(t).attr("autocomplete","off");this.find(".js-select-all").change(u);this.find("#people_input_address").change(B);this.find("#organization_input_address").change(h);this.find("#people_input_type_id").change(g);this.find("#program_input_official_id").change(E);this.find("#event_input_all_day, #program_input_all_day").change(z);this.find("#invoice_process_input_profile_id").change(i);this.find("#invoice_input_price_tier_id").change(o);return this};function m(){var I=j(this);var G=j(this).data("pages");var H=document.location.search;if(G){if(H===""){H="?pages="+G}else{if(H.match(/(\?|&)pages=(.*?)(&|$)/)){H=H.replace(/(\?|&)pages=(.*?)(&|$)/,"$1pages="+G+"$3")}else{H=H+"&pages="+G}}}var F=j(window).scrollTop();j.ajax({url:document.location.pathname+H,headers:{"DZ-Output":"reload"},success:function(K){var J=j(j.parseHTML(K));I.html(J);J.initialize();j(window).scrollTop(F)}})}j(document).on("click","[data-modal]",d).on("click","[data-confirm], [data-remote]",D).on("reload","#main",m).initialize();j(function(){var F=window.location.hash;F&&j('ul.nav a[href="'+F+'"]').tab("show");j(".nav-tabs a").click(function(H){j(this).tab("show");var G=j("body").scrollTop();window.location.hash=this.hash;j("html,body").scrollTop(G)})});if(window.location.hash!=""){j('.nav-tabs a[href="'+window.location.hash+'"]').tab("show")}});